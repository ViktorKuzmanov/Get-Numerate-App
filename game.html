<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Game</title>
	</head>
	<body>
		<button onclick="goBack()">Go Back</button>
		<p>Game page</p>
		<p>
			<span id="textBefore"></span>
			<span id="num1"></span>
			<span id="textInMiddle"></span>
			<span id="num2"></span>
			<span id="textAfter"></span>
		</p>
		<input id="result" type="number" placeholder="Write result" />
		<p>
			<input type="button" value="1" onClick="addNumber(this);" />
			<input type="button" value="2" onClick="addNumber(this);" />
			<input type="button" value="3" onClick="addNumber(this);" />
			<input type="button" value="4" onClick="addNumber(this);" />
			<input type="button" value="5" onClick="addNumber(this);" />
			<input type="button" value="6" onClick="addNumber(this);" />
			<input type="button" value="7" onClick="addNumber(this);" />
			<input type="button" value="8" onClick="addNumber(this);" />
			<input type="button" value="9" onClick="addNumber(this);" />
			<input type="button" value="0" onClick="addNumber(this);" />
			<input type="button" value="Done" onClick="checkIfResultIsCorrect()" />
		</p>
		<script>
			// put cursor on result input
			var num1;
			var num2;
			function generateRandomNumbersBasedOnDigits() {
				// get digits of num1 and num2 from localStorage
				console.log("object");
				const currentOperation = localStorage.getItem("currentOperation");
				const getChosenDigitsString = localStorage.getItem(currentOperation + "Digits");
				const getChoseDigitsJsObject = JSON.parse(getChosenDigitsString);
				const num1Digits = getChoseDigitsJsObject["firstNumDigit"];
				const num2Digits = getChoseDigitsJsObject["secondNumDigit"];
				num1 = generateOneNumWithDigits(parseInt(num1Digits));
				num2 = generateOneNumWithDigits(parseInt(num2Digits));
			}
			function generateOneNumWithDigits(digits) {
				var randomNum;
				switch (digits) {
					case 1:
						var max = 10;
						var min = 1;
						randomNum = Math.random() * (max - min) + min;
						break;
					case 2:
						var max = 100;
						var min = 10;
						randomNum = Math.random() * (max - min) + min;
						break;
					case 3:
						var max = 1000;
						var min = 100;
						randomNum = Math.random() * (max - min) + min;
						break;
					default:
						break;
				}
				return parseInt(randomNum);
			}
			function updateUIwithQuestion() {
				// const spanTextInMiddle = document.getElementById("textInMiddle");
				// const spanTextBefore = document.getElementById("textBefore");
				// const spanTextAfter = document.getElementById("textAfter");
				const currentOperation = localStorage.getItem("currentOperation");
				switch (currentOperation) {
					case "All operations":
						const allOperationArray = ["Addition", "Subtraction", "Multiplication", "Division"];
						const randomNum = Math.floor(Math.random() * 4);
						updateUINumbersAndOperation(allOperationArray[randomNum]);
						break;
					case "Percentages":
						break;
					default:
						// + - * /
						updateUINumbersAndOperation(currentOperation);
						break;
				}
			}

			function updateUINumbersAndOperation(currentOperation) {
				const spanTextBefore = document.getElementById("textInMiddle");
				const num1Span = document.getElementById("num1");
				const num2Span = document.getElementById("num2");
				num1Span.innerText = this.num1;
				num2Span.innerText = this.num2;
				switch (currentOperation) {
					case "Addition":
						spanTextBefore.innerText = "+";
						break;
					case "Subtraction":
						spanTextBefore.innerText = "-";
						break;
					case "Multiplication":
						spanTextBefore.innerText = "*";
						break;
					case "Division":
						spanTextBefore.innerText = "/";
						break;
					default:
						// + - * /
						break;
				}
			}

			document.getElementById("result").focus();
			document.getElementById("result").select();
			function goBack() {
				window.history.back();
			}
			function addNumber(element) {
				document.getElementById("result").value = document.getElementById("result").value + element.value;
			}
			function checkIfResultIsCorrect() {
				// check if the result of operations or percentage is correct
				generateRandomNumbersBasedOnDigits();
				updateUIwithQuestion();
			}
		</script>
	</body>
</html>
